import{loadFragment as p}from"../fragment/fragment.js";import{l as u,b,d as w,a as h}from"../chunks/aem-CseYPO2m.js";import"../chunks/delayed-CCr1TJIn.js";async function L(a){await u(`${window.hlx.codeBasePath}/blocks/modal/modal.css`);const o=document.createElement("dialog"),n=document.createElement("div");n.classList.add("modal-content"),n.append(...a),o.append(n);const t=document.createElement("button");t.classList.add("close-button"),t.setAttribute("aria-label","Close"),t.type="button",t.innerHTML='<span class="icon icon-close"></span>',t.addEventListener("click",()=>o.close()),o.prepend(t);const e=b("modal","");return document.querySelector("main").append(e),w(e),await h(e),o.addEventListener("click",d=>{const{left:l,right:i,top:m,bottom:r}=o.getBoundingClientRect(),{clientX:c,clientY:s}=d;(c<l||c>i||s<m||s>r)&&o.close()}),o.addEventListener("close",()=>{document.body.classList.remove("modal-open"),e.remove()}),e.innerHTML="",e.append(o),{block:e,showModal:()=>{o.showModal(),setTimeout(()=>{n.scrollTop=0},0),document.body.classList.add("modal-open")}}}async function v(a){const o=a.startsWith("http")?new URL(a,window.location).pathname:a,n=await p(o),{showModal:t}=await L(n.childNodes);t()}export{L as createModal,v as openModal};
//# sourceMappingURL=modal.js.map
