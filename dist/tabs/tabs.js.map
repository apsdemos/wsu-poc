{"version":3,"file":"tabs.js","sources":["../../src/blocks/tabs/tabs.js"],"sourcesContent":["// eslint-disable-next-line import/no-unresolved\nimport { toClassName } from '../../scripts/aem.js';\n\nexport default async function decorate(block) {\n  // build tablist\n  const tablist = document.createElement('div');\n  tablist.className = 'tabs-list';\n  tablist.setAttribute('role', 'tablist');\n\n  // decorate tabs and tabpanels\n  const tabs = [...block.children].map((child) => child.firstElementChild);\n  tabs.forEach((tab, i) => {\n    const id = toClassName(tab.textContent);\n\n    // decorate tabpanel\n    const tabpanel = block.children[i];\n    tabpanel.className = 'tabs-panel';\n    tabpanel.id = `tabpanel-${id}`;\n    tabpanel.setAttribute('aria-hidden', !!i);\n    tabpanel.setAttribute('aria-labelledby', `tab-${id}`);\n    tabpanel.setAttribute('role', 'tabpanel');\n\n    // build tab button\n    const button = document.createElement('button');\n    button.className = 'tabs-tab';\n    button.id = `tab-${id}`;\n    button.innerHTML = tab.innerHTML;\n    button.setAttribute('aria-controls', `tabpanel-${id}`);\n    button.setAttribute('aria-selected', !i);\n    button.setAttribute('role', 'tab');\n    button.setAttribute('type', 'button');\n    button.addEventListener('click', () => {\n      block.querySelectorAll('[role=tabpanel]').forEach((panel) => {\n        panel.setAttribute('aria-hidden', true);\n      });\n      tablist.querySelectorAll('button').forEach((btn) => {\n        btn.setAttribute('aria-selected', false);\n      });\n      tabpanel.setAttribute('aria-hidden', false);\n      button.setAttribute('aria-selected', true);\n    });\n    tablist.append(button);\n    tab.remove();\n  });\n\n  block.prepend(tablist);\n}\n"],"names":["decorate","block","tablist","child","tab","id","toClassName","tabpanel","button","panel","btn"],"mappings":"8CAGe,eAAeA,EAASC,EAAO,CAE5C,MAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,YACpBA,EAAQ,aAAa,OAAQ,SAAS,EAGzB,CAAC,GAAGD,EAAM,QAAQ,EAAE,IAAKE,GAAUA,EAAM,iBAAiB,EAClE,QAAQ,CAACC,EAAK,IAAM,CACvB,MAAMC,EAAKC,EAAYF,EAAI,WAAW,EAGhCG,EAAWN,EAAM,SAAS,CAAC,EACjCM,EAAS,UAAY,aACrBA,EAAS,GAAK,YAAYF,CAAE,GAC5BE,EAAS,aAAa,cAAe,CAAC,CAAC,CAAC,EACxCA,EAAS,aAAa,kBAAmB,OAAOF,CAAE,EAAE,EACpDE,EAAS,aAAa,OAAQ,UAAU,EAGxC,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAY,WACnBA,EAAO,GAAK,OAAOH,CAAE,GACrBG,EAAO,UAAYJ,EAAI,UACvBI,EAAO,aAAa,gBAAiB,YAAYH,CAAE,EAAE,EACrDG,EAAO,aAAa,gBAAiB,CAAC,CAAC,EACvCA,EAAO,aAAa,OAAQ,KAAK,EACjCA,EAAO,aAAa,OAAQ,QAAQ,EACpCA,EAAO,iBAAiB,QAAS,IAAM,CACrCP,EAAM,iBAAiB,iBAAiB,EAAE,QAASQ,GAAU,CAC3DA,EAAM,aAAa,cAAe,EAAI,CAC9C,CAAO,EACDP,EAAQ,iBAAiB,QAAQ,EAAE,QAASQ,GAAQ,CAClDA,EAAI,aAAa,gBAAiB,EAAK,CAC/C,CAAO,EACDH,EAAS,aAAa,cAAe,EAAK,EAC1CC,EAAO,aAAa,gBAAiB,EAAI,CAC/C,CAAK,EACDN,EAAQ,OAAOM,CAAM,EACrBJ,EAAI,OAAQ,CAChB,CAAG,EAEDH,EAAM,QAAQC,CAAO,CACvB"}