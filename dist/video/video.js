const u=window.matchMedia("(prefers-reduced-motion: reduce)");function m(e,n,o){const t=new URLSearchParams(e.search);let i="";(o||n)&&(i=`&${Object.entries({autoplay:n?"1":"0",mute:o?"1":"0",controls:o?"0":"1",disablekb:o?"1":"0",loop:o?"1":"0",playsinline:o?"1":"0"}).map(([c,p])=>`${c}=${encodeURIComponent(p)}`).join("&")}`);let r=t.get("v")?encodeURIComponent(t.get("v")):"";const a=e.pathname;e.origin.includes("youtu.be")&&([,r]=e.pathname.split("/"));const s=document.createElement("div");return s.innerHTML=`<div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;">
      <iframe src="https://www.youtube.com${r?`/embed/${r}?rel=0&v=${r}${i}`:a}" style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" 
      allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope; picture-in-picture" allowfullscreen="" scrolling="no" title="Content from Youtube" loading="lazy"></iframe>
    </div>`,s.children.item(0)}function f(e,n,o){const[,t]=e.pathname.split("/");let i="";(o||n)&&(i=`?${Object.entries({autoplay:n?"1":"0",background:o?"1":"0"}).map(([s,d])=>`${s}=${encodeURIComponent(d)}`).join("&")}`);const r=document.createElement("div");return r.innerHTML=`<div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;">
      <iframe src="https://player.vimeo.com/video/${t}${i}" 
      style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" 
      frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen  
      title="Content from Vimeo" loading="lazy"></iframe>
    </div>`,r.children.item(0)}function v(e,n,o){const t=document.createElement("video");t.setAttribute("controls",""),n&&t.setAttribute("autoplay",""),o&&(t.setAttribute("loop",""),t.setAttribute("playsinline",""),t.removeAttribute("controls"),t.addEventListener("canplay",()=>{t.muted=!0,n&&t.play()}));const i=document.createElement("source");return i.setAttribute("src",e),i.setAttribute("type",`video/${e.split(".").pop()}`),t.append(i),t}const l=(e,n,o,t)=>{if(e.dataset.embedLoaded==="true")return;const i=new URL(n),r=n.includes("youtube")||n.includes("youtu.be"),a=n.includes("vimeo");if(r){const s=m(i,o,t);e.append(s),s.querySelector("iframe").addEventListener("load",()=>{e.dataset.embedLoaded=!0})}else if(a){const s=f(i,o,t);e.append(s),s.querySelector("iframe").addEventListener("load",()=>{e.dataset.embedLoaded=!0})}else{const s=v(n,o,t);e.append(s),s.addEventListener("canplay",()=>{e.dataset.embedLoaded=!0})}};async function y(e){const n=e.querySelector("picture"),o=e.querySelector("a").href;e.textContent="",e.dataset.embedLoaded=!1;const t=e.classList.contains("autoplay");if(n){e.classList.add("placeholder");const i=document.createElement("div");i.className="video-placeholder",i.append(n),t||(i.insertAdjacentHTML("beforeend",'<div class="video-placeholder-play"><button type="button" title="Play"></button></div>'),i.addEventListener("click",()=>{i.remove(),l(e,o,!0,!1)})),e.append(i)}if(!n||t){const i=new IntersectionObserver(r=>{if(r.some(a=>a.isIntersecting)){i.disconnect();const a=t&&!u.matches;l(e,o,a,t)}});i.observe(e)}}export{y as default};
//# sourceMappingURL=video.js.map
