{"version":3,"file":"footer.js","sources":["../../src/blocks/footer/footer.js"],"sourcesContent":["import { getMetadata } from '../../scripts/aem.js';\nimport { loadFragment } from '../fragment/fragment.js';\nimport './footer.css';\n\n/**\n * loads and decorates the footer\n * @param {Element} block The footer block element\n */\nexport default async function decorate(block) {\n  // load footer as fragment\n  const footerMeta = getMetadata('footer');\n  const footerPath = footerMeta ? new URL(footerMeta, window.location).pathname : '/footer-da';\n  const fragment = await loadFragment(footerPath);\n\n  block.textContent = '';\n  const footerContent = document.createElement('div');\n  const footerTop = document.createElement('div');\n  footerTop.className = 'footer-top';\n\n\n  const footerOverlay = document.createElement('div');\n  footerOverlay.className = 'footer-overlay';\n\n  const footerInner = document.createElement('div');\n  footerInner.className = 'footer__inner';\n\n  const footer = document.createElement('div');\n\n  while (fragment.firstElementChild) {\n    footer.append(fragment.firstElementChild);\n  }\n\n  const sections = footer.querySelectorAll('.default-content-wrapper');\n\n  let logoUrl = ''\n  if (sections[0].querySelector('img')) {\n    logoUrl = sections[1].querySelector('img').src;\n  } else {\n    logoUrl = sections[1].querySelector('p').innerText;\n  }\n\n  const linksTitles = sections[0].querySelectorAll('h2');\n  const linksList = sections[0].querySelectorAll('ul');\n\n\n  for (let x = 0; x < linksTitles.length; x++) {\n    const sectionTitle = linksTitles[x].innerText\n    const sectionLinks = linksList[x]\n\n    const section = document.createElement('div');\n    section.className = 'footer-section';\n\n    const sectionTitleElement = document.createElement('h2');\n    sectionTitleElement.innerText = sectionTitle;\n    section.append(sectionTitleElement);\n\n    const sectionLinksElement = document.createElement('ul');\n    sectionLinksElement.innerHTML = sectionLinks.innerHTML;\n    section.append(sectionLinksElement);\n    footerInner.append(section);\n  }\n\n\n\n  const helpLinks = sections[2].querySelector('ul')\n  const copyrightText = sections[3].querySelector('p').innerText\n\n  const footerCopyright = document.createElement('div');\n  footerCopyright.className = 'footer-copyright';\n  footerCopyright.append(helpLinks);\n  footerCopyright.append(copyrightText);\n\n\n  const footerLogo = document.createElement('div');\n  footerLogo.className = 'footer-logo';\n  const logoImage = document.createElement('img');\n  logoImage.src = logoUrl;\n  footerLogo.append(logoImage);\n  footerInner.append(footerLogo);\n\n\n  footerOverlay.append(footerInner);\n  footerTop.append(footerOverlay);\n\n  footerContent.append(footerTop);\n  footerContent.append(footerCopyright);\n\n  block.append(footerContent);\n}\n"],"names":["decorate","block","footerMeta","getMetadata","footerPath","fragment","loadFragment","footerContent","footerTop","footerOverlay","footerInner","footer","sections","logoUrl","linksTitles","linksList","x","sectionTitle","sectionLinks","section","sectionTitleElement","sectionLinksElement","helpLinks","copyrightText","footerCopyright","footerLogo","logoImage"],"mappings":"2IAQe,eAAeA,EAASC,EAAO,CAE5C,MAAMC,EAAaC,EAAY,QAAQ,EACjCC,EAAaF,EAAa,IAAI,IAAIA,EAAY,OAAO,QAAQ,EAAE,SAAW,aAC1EG,EAAW,MAAMC,EAAaF,CAAU,EAE9CH,EAAM,YAAc,GACpB,MAAMM,EAAgB,SAAS,cAAc,KAAK,EAC5CC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aAGtB,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,iBAE1B,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,gBAExB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAE3C,KAAON,EAAS,mBACdM,EAAO,OAAON,EAAS,iBAAiB,EAG1C,MAAMO,EAAWD,EAAO,iBAAiB,0BAA0B,EAEnE,IAAIE,EAAU,GACVD,EAAS,CAAC,EAAE,cAAc,KAAK,EACjCC,EAAUD,EAAS,CAAC,EAAE,cAAc,KAAK,EAAE,IAE3CC,EAAUD,EAAS,CAAC,EAAE,cAAc,GAAG,EAAE,UAG3C,MAAME,EAAcF,EAAS,CAAC,EAAE,iBAAiB,IAAI,EAC/CG,EAAYH,EAAS,CAAC,EAAE,iBAAiB,IAAI,EAGnD,QAASI,EAAI,EAAGA,EAAIF,EAAY,OAAQE,IAAK,CAC3C,MAAMC,EAAeH,EAAYE,CAAC,EAAE,UAC9BE,EAAeH,EAAUC,CAAC,EAE1BG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,iBAEpB,MAAMC,EAAsB,SAAS,cAAc,IAAI,EACvDA,EAAoB,UAAYH,EAChCE,EAAQ,OAAOC,CAAmB,EAElC,MAAMC,EAAsB,SAAS,cAAc,IAAI,EACvDA,EAAoB,UAAYH,EAAa,UAC7CC,EAAQ,OAAOE,CAAmB,EAClCX,EAAY,OAAOS,CAAO,CAC9B,CAIE,MAAMG,EAAYV,EAAS,CAAC,EAAE,cAAc,IAAI,EAC1CW,EAAgBX,EAAS,CAAC,EAAE,cAAc,GAAG,EAAE,UAE/CY,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,mBAC5BA,EAAgB,OAAOF,CAAS,EAChCE,EAAgB,OAAOD,CAAa,EAGpC,MAAME,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,cACvB,MAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,IAAMb,EAChBY,EAAW,OAAOC,CAAS,EAC3BhB,EAAY,OAAOe,CAAU,EAG7BhB,EAAc,OAAOC,CAAW,EAChCF,EAAU,OAAOC,CAAa,EAE9BF,EAAc,OAAOC,CAAS,EAC9BD,EAAc,OAAOiB,CAAe,EAEpCvB,EAAM,OAAOM,CAAa,CAC5B"}