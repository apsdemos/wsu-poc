{"version":3,"file":"footer.js","sources":["../../src/blocks/footer/footer.js"],"sourcesContent":["import { getMetadata, createOptimizedPicture } from '../../scripts/aem.js';\nimport { loadFragment } from '../fragment/fragment.js';\nimport './footer.css';\n\n/**\n * loads and decorates the footer\n * @param {Element} block The footer block element\n */\nexport default async function decorate(block) {\n  // load footer as fragment\n  const footerMeta = getMetadata('footer');\n  const footerPath = footerMeta ? new URL(footerMeta, window.location).pathname : '/footer-da';\n  const fragment = await loadFragment(footerPath);\n\n  block.textContent = '';\n  const footerContent = document.createElement('div');\n  const footerTop = document.createElement('div');\n  footerTop.className = 'footer-top';\n\n\n  const footerOverlay = document.createElement('div');\n  footerOverlay.className = 'footer-overlay';\n\n  const footerInner = document.createElement('div');\n  footerInner.className = 'footer__inner';\n\n  const footer = document.createElement('div');\n\n  while (fragment.firstElementChild) {\n    footer.append(fragment.firstElementChild);\n  }\n\n  const sections = footer.querySelectorAll('.default-content-wrapper');\n\n  const logo = sections[1].querySelector('picture')\n\n  const linksTitles = sections[0].querySelectorAll('h2');\n  const linksList = sections[0].querySelectorAll('ul');\n\n  for (let x = 0; x < linksTitles.length; x++) {\n    const sectionTitle = linksTitles[x].innerText\n    const sectionLinks = linksList[x]\n\n    const section = document.createElement('div');\n    section.className = 'footer-section';\n\n    const sectionTitleElement = document.createElement('h2');\n    sectionTitleElement.innerText = sectionTitle;\n    section.append(sectionTitleElement);\n\n    const sectionLinksElement = document.createElement('ul');\n    sectionLinksElement.innerHTML = sectionLinks.innerHTML;\n    section.append(sectionLinksElement);\n    footerInner.append(section);\n  }\n\n  const helpLinks = sections[2].querySelector('ul')\n  const copyrightText = sections[3].querySelector('p').innerText\n\n  const footerBg = sections[4].querySelector('picture img');\n  if (footerBg) {\n    const footerBgPicture = createOptimizedPicture(footerBg.src, footerBg.alt, false, [{ width: '1920', height: '1080' }]);\n    footerTop.style.backgroundImage = `url(${footerBgPicture.querySelector('img').src})`;\n  }\n\n  const footerCopyright = document.createElement('div');\n  footerCopyright.className = 'footer-copyright';\n  footerCopyright.append(helpLinks);\n  footerCopyright.append(copyrightText);\n\n\n  const footerLogo = document.createElement('div');\n  footerLogo.className = 'footer-logo';\n\n  footerLogo.append(logo);\n  const img = footerLogo.querySelector('picture > img');\n  if (img) {\n    img.closest('picture').replaceWith(\n      createOptimizedPicture(img.src, img.alt, false, [{ width: '360', height: '65' }])\n    );\n  }\n\n  footerInner.append(footerLogo);\n\n  footerOverlay.append(footerInner);\n  footerTop.append(footerOverlay);\n\n  footerContent.append(footerTop);\n  footerContent.append(footerCopyright);\n\n  block.append(footerContent);\n}\n"],"names":["decorate","block","footerMeta","getMetadata","footerPath","fragment","loadFragment","footerContent","footerTop","footerOverlay","footerInner","footer","sections","logo","linksTitles","linksList","x","sectionTitle","sectionLinks","section","sectionTitleElement","sectionLinksElement","helpLinks","copyrightText","footerBg","footerBgPicture","createOptimizedPicture","footerCopyright","footerLogo","img"],"mappings":"kJAQe,eAAeA,EAASC,EAAO,CAE5C,MAAMC,EAAaC,EAAY,QAAQ,EACjCC,EAAaF,EAAa,IAAI,IAAIA,EAAY,OAAO,QAAQ,EAAE,SAAW,aAC1EG,EAAW,MAAMC,EAAaF,CAAU,EAE9CH,EAAM,YAAc,GACpB,MAAMM,EAAgB,SAAS,cAAc,KAAK,EAC5CC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aAGtB,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,iBAE1B,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAY,gBAExB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAE3C,KAAON,EAAS,mBACdM,EAAO,OAAON,EAAS,iBAAiB,EAG1C,MAAMO,EAAWD,EAAO,iBAAiB,0BAA0B,EAE7DE,EAAOD,EAAS,CAAC,EAAE,cAAc,SAAS,EAE1CE,EAAcF,EAAS,CAAC,EAAE,iBAAiB,IAAI,EAC/CG,EAAYH,EAAS,CAAC,EAAE,iBAAiB,IAAI,EAEnD,QAASI,EAAI,EAAGA,EAAIF,EAAY,OAAQE,IAAK,CAC3C,MAAMC,EAAeH,EAAYE,CAAC,EAAE,UAC9BE,EAAeH,EAAUC,CAAC,EAE1BG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,iBAEpB,MAAMC,EAAsB,SAAS,cAAc,IAAI,EACvDA,EAAoB,UAAYH,EAChCE,EAAQ,OAAOC,CAAmB,EAElC,MAAMC,EAAsB,SAAS,cAAc,IAAI,EACvDA,EAAoB,UAAYH,EAAa,UAC7CC,EAAQ,OAAOE,CAAmB,EAClCX,EAAY,OAAOS,CAAO,CAC9B,CAEE,MAAMG,EAAYV,EAAS,CAAC,EAAE,cAAc,IAAI,EAC1CW,EAAgBX,EAAS,CAAC,EAAE,cAAc,GAAG,EAAE,UAE/CY,EAAWZ,EAAS,CAAC,EAAE,cAAc,aAAa,EACxD,GAAIY,EAAU,CACZ,MAAMC,EAAkBC,EAAuBF,EAAS,IAAKA,EAAS,IAAK,GAAO,CAAC,CAAE,MAAO,OAAQ,OAAQ,MAAQ,CAAA,CAAC,EACrHhB,EAAU,MAAM,gBAAkB,OAAOiB,EAAgB,cAAc,KAAK,EAAE,GAAG,GACrF,CAEE,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,mBAC5BA,EAAgB,OAAOL,CAAS,EAChCK,EAAgB,OAAOJ,CAAa,EAGpC,MAAMK,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,cAEvBA,EAAW,OAAOf,CAAI,EACtB,MAAMgB,EAAMD,EAAW,cAAc,eAAe,EAChDC,GACFA,EAAI,QAAQ,SAAS,EAAE,YACrBH,EAAuBG,EAAI,IAAKA,EAAI,IAAK,GAAO,CAAC,CAAE,MAAO,MAAO,OAAQ,IAAI,CAAE,CAAC,CACjF,EAGHnB,EAAY,OAAOkB,CAAU,EAE7BnB,EAAc,OAAOC,CAAW,EAChCF,EAAU,OAAOC,CAAa,EAE9BF,EAAc,OAAOC,CAAS,EAC9BD,EAAc,OAAOoB,CAAe,EAEpC1B,EAAM,OAAOM,CAAa,CAC5B"}