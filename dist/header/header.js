import{h,f as w}from"../chunks/aem-CseYPO2m.js";import{loadFragment as S}from"../fragment/fragment.js";import"../chunks/delayed-CCr1TJIn.js";const o=window.matchMedia("(min-width: 900px)");function y(n){if(n.code==="Escape"){const t=document.getElementById("nav"),e=t.querySelector(".nav-sections"),r=e.querySelector('[aria-expanded="true"]');r&&o.matches?(f(e),r.focus()):o.matches||(u(t,e),t.querySelector("button").focus())}}function g(n){const t=n.currentTarget;if(!t.contains(n.relatedTarget)){const e=t.querySelector(".nav-sections");e.querySelector('[aria-expanded="true"]')&&o.matches?f(e,!1):o.matches||u(t,e,!1)}}function A(n){const t=document.activeElement;if(t.className==="nav-drop"&&(n.code==="Enter"||n.code==="Space")){const r=t.getAttribute("aria-expanded")==="true";f(t.closest(".nav-sections")),t.setAttribute("aria-expanded",r?"false":"true")}}function x(){document.activeElement.addEventListener("keydown",A)}function f(n,t=!1){n.querySelectorAll(".nav-sections .default-content-wrapper > ul > li").forEach(e=>{e.setAttribute("aria-expanded",t)})}function u(n,t,e=null){const r=e!==null?!e:n.getAttribute("aria-expanded")==="true",a=n.querySelector(".nav-hamburger button");document.body.style.overflowY=r||o.matches?"":"hidden",n.setAttribute("aria-expanded",r?"false":"true"),f(t,r||o.matches?"false":"true"),a.setAttribute("aria-label",r?"Open navigation":"Close navigation");const i=t.querySelectorAll(".nav-drop");o.matches?i.forEach(c=>{c.hasAttribute("tabindex")||(c.setAttribute("tabindex",0),c.addEventListener("focus",x))}):i.forEach(c=>{c.removeAttribute("tabindex"),c.removeEventListener("focus",x)}),!r||o.matches?(window.addEventListener("keydown",y),n.addEventListener("focusout",g)):(window.removeEventListener("keydown",y),n.removeEventListener("focusout",g))}function q(n){const t=n.querySelector(":scope > a");return t?t.textContent.trim():Array.from(n.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE).map(e=>e.textContent).join(" ")}async function L(n,t){const e=[],r=document.querySelector(".nav-brand a[href]").href;let a=Array.from(n.querySelectorAll("a")).find(l=>l.href===t);if(a)do{const l=a.querySelector(":scope > a");e.unshift({title:q(a),url:l?l.href:null}),a=a.closest("ul")?.closest("li")}while(a);else t!==r&&e.unshift({title:h("og:title"),url:t});const c=(await w()).breadcrumbsHomeLabel||"Home";return e.unshift({title:c,url:r}),e.length>1&&(e[e.length-1].url=null),e[e.length-1]["aria-current"]="page",e}async function N(){const n=document.createElement("nav");n.className="breadcrumbs";const t=await L(document.querySelector(".nav-sections"),document.location.href),e=document.createElement("ol");return e.append(...t.map(r=>{const a=document.createElement("li");if(r["aria-current"]&&a.setAttribute("aria-current",r["aria-current"]),r.url){const i=document.createElement("a");i.href=r.url,i.textContent=r.title,a.append(i)}else a.textContent=r.title;return a})),n.append(e),n}async function D(n){const t=h("nav"),e=t?new URL(t,window.location).pathname:"/nav",r=await S(e);n.textContent="";const a=document.createElement("nav");for(a.id="nav";r.firstElementChild;)a.append(r.firstElementChild);["brand","sections","tools"].forEach((s,v)=>{const E=a.children[v];E&&E.classList.add(`nav-${s}`)});const l=a.querySelector(".nav-brand").querySelector(".button");l&&(l.className="",l.closest(".button-container").className="");const d=a.querySelector(".nav-sections");d&&d.querySelectorAll(":scope .default-content-wrapper > ul > li").forEach(s=>{s.querySelector("ul")&&s.classList.add("nav-drop"),s.addEventListener("click",()=>{if(o.matches){const v=s.getAttribute("aria-expanded")==="true";f(d),s.setAttribute("aria-expanded",v?"false":"true")}})});const b=a.querySelector(".nav-tools");if(b){const s=b.querySelector('a[href*="search"]');s&&s.textContent===""&&s.setAttribute("aria-label","Search")}const m=document.createElement("div");m.classList.add("nav-hamburger"),m.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
      <span class="nav-hamburger-icon"></span>
    </button>`,m.addEventListener("click",()=>u(a,d)),a.prepend(m),a.setAttribute("aria-expanded","false"),u(a,d,o.matches),o.addEventListener("change",()=>u(a,d,o.matches));const p=document.createElement("div");p.className="nav-wrapper",p.append(a),n.append(p),h("breadcrumbs").toLowerCase()==="true"&&p.append(await N())}export{D as default};
//# sourceMappingURL=header.js.map
