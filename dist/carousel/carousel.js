import{f as S}from"../chunks/aem-D3RMVdVl.js";function f(e){const s=e.closest(".carousel"),l=parseInt(e.dataset.slideIndex,10);s.dataset.activeSlide=l,s.querySelectorAll(".carousel-slide").forEach((r,i)=>{r.setAttribute("aria-hidden",i!==l),r.querySelectorAll("a").forEach(o=>{i!==l?o.setAttribute("tabindex","-1"):o.removeAttribute("tabindex")})}),s.querySelectorAll(".carousel-slide-indicator").forEach((r,i)=>{i!==l?r.querySelector("button").removeAttribute("disabled"):r.querySelector("button").setAttribute("disabled","true")})}function c(e,s=0){const l=e.querySelectorAll(".carousel-slide");let t=s<0?l.length-1:s;s>=l.length&&(t=0);const a=l[t];a.querySelectorAll("a").forEach(r=>r.removeAttribute("tabindex")),e.querySelector(".carousel-slides").scrollTo({top:0,left:a.offsetLeft,behavior:"smooth"})}function h(e){const s=e.querySelector(".carousel-slide-indicators");if(!s)return;s.querySelectorAll("button").forEach(t=>{t.addEventListener("click",a=>{const r=a.currentTarget.parentElement;c(e,parseInt(r.dataset.targetSlide,10))})}),e.querySelector(".slide-prev").addEventListener("click",()=>{c(e,parseInt(e.dataset.activeSlide,10)-1)}),e.querySelector(".slide-next").addEventListener("click",()=>{c(e,parseInt(e.dataset.activeSlide,10)+1)});const l=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting&&f(a.target)})},{threshold:.5});e.querySelectorAll(".carousel-slide").forEach(t=>{l.observe(t)})}function v(e,s,l){const t=document.createElement("li");t.dataset.slideIndex=s,t.setAttribute("id",`carousel-${l}-slide-${s}`),t.classList.add("carousel-slide"),e.querySelectorAll(":scope > div").forEach((r,i)=>{r.classList.add(`carousel-slide-${i===0?"image":"content"}`),t.append(r)});const a=t.querySelector("h1, h2, h3, h4, h5, h6");return a&&t.setAttribute("aria-labelledby",a.getAttribute("id")),t}let u=0;async function A(e){u+=1,e.setAttribute("id",`carousel-${u}`);const s=e.querySelectorAll(":scope > div"),l=s.length<2,t=await S();e.setAttribute("role","region"),e.setAttribute("aria-roledescription",t.carousel||"Carousel");const a=document.createElement("div");a.classList.add("carousel-slides-container");const r=document.createElement("ul");r.classList.add("carousel-slides"),e.prepend(r);let i;if(!l){const o=document.createElement("nav");o.setAttribute("aria-label",t.carouselSlideControls||"Carousel Slide Controls"),i=document.createElement("ol"),i.classList.add("carousel-slide-indicators"),o.append(i),e.append(o);const n=document.createElement("div");n.classList.add("carousel-navigation-buttons"),n.innerHTML=`
      <button type="button" class= "slide-prev" aria-label="${t.previousSlide||"Previous Slide"}"></button>
      <button type="button" class="slide-next" aria-label="${t.nextSlide||"Next Slide"}"></button>
    `,a.append(n)}s.forEach((o,n)=>{const p=v(o,n,u);if(r.append(p),i){const d=document.createElement("li");d.classList.add("carousel-slide-indicator"),d.dataset.targetSlide=n,d.innerHTML=`<button type="button" aria-label="${t.showSlide||"Show Slide"} ${n+1} ${t.of||"of"} ${s.length}"></button>`,i.append(d)}o.remove()}),a.append(r),e.prepend(a),l||h(e)}export{A as default,c as showSlide};
//# sourceMappingURL=carousel.js.map
