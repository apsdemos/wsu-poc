{"version":3,"file":"hero-banner.js","sources":["../../src/blocks/hero-banner/hero-banner.js"],"sourcesContent":["import { createOptimizedPicture } from '../../scripts/aem.js';\nimport './hero-banner.css';\n\nexport default function decorate(block) {\n\n\n    const tabContents = document.createElement('div');\n    tabContents.classList.add('hero__contents');\n\n    const tabs = document.createElement('ul');\n    tabs.classList.add('hero__tabs');\n\n    let index = 0;\n\n    [...block.children].forEach((row) => {\n        const items = row.querySelectorAll('div');\n        const imageCol = items[0];\n        const textCol = items[1];\n\n        const link = textCol.querySelector('a');\n\n        let imgSrc = '';\n        if (imageCol.querySelector('img')) {\n            imgSrc = imageCol.querySelector('img').src;\n        } else {\n            imgSrc = imageCol.innerText.trim();\n        }\n\n        const url = link ? link.href : '';\n        const title = link ? link.innerText : textCol.innerText.trim();\n        const texts = Array.from(textCol.querySelectorAll('p')).slice(1).map(p => p.innerText.trim()).join(' ');\n\n        const tabContent = document.createElement('div');\n        tabContent.classList.add('hero__tab-content');\n        tabContent.innerHTML = `\n            <a href=\"${url}\" class=\"hero__tab-link\">\n            <img class=\"hero__image\" src=\"${imgSrc}\" alt=\"${title}\" />\n            </a> \n            <a class=\"tab-content-blurb\" href=\"${url}\"> \n                        <h3>${title}</h3> \n                </a>\n        `;\n        tabContents.appendChild(tabContent);\n\n        const li = document.createElement('li');\n        const tabBtn = document.createElement('button');\n        li.classList.add('hero__tab');\n        tabBtn.innerText = title;\n        tabBtn.addEventListener('click', () => {\n            // deactivate all tabs and contents\n            tabs.querySelectorAll('.hero__tab').forEach((t) => t.classList.remove('active'));\n            tabContents.querySelectorAll('.hero__tab-content').forEach((c) => c.classList.remove('active'));\n\n            // activate the clicked tab and its content\n            tabBtn.closest('li').classList.add('active');\n            tabContent.classList.add('active');\n        });\n        li.appendChild(tabBtn);\n\n        const blurb = document.createElement('div');\n        blurb.classList.add('hero__blurb');\n        blurb.innerHTML = `<a href=\"${url}\"> \n                        <h3>${title}</h3> \n                    <div class=\"hero__blurb-content\">\n                        <p>${texts}</p>\n                        <p>Find out more...</p>\n                    </div>\n                </a>`;\n\n\n        li.appendChild(blurb);\n\n        tabs.appendChild(li);\n        index++;\n    });\n\n    // replace images with optimized versions\n    // ul.querySelectorAll('picture > img').forEach((img) => img.closest('picture').replaceWith(createOptimizedPicture(img.src, img.alt, false, [{ width: '750' }])));\n\n    block.innerHTML = '';\n    block.appendChild(tabContents);\n    block.appendChild(tabs);\n\n    // activate the first tab\n    if (tabs.children.length > 0) {\n        tabs.children[0].classList.add('active');\n        tabContents.children[0].classList.add('active');\n    }\n}\n"],"names":["decorate","block","tabContents","tabs","row","items","imageCol","textCol","link","imgSrc","url","title","texts","p","tabContent","li","tabBtn","t","c","blurb"],"mappings":"kCAGe,SAASA,EAASC,EAAO,CAGpC,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAU,IAAI,gBAAgB,EAE1C,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,YAAY,EAI/B,CAAC,GAAGF,EAAM,QAAQ,EAAE,QAASG,GAAQ,CACjC,MAAMC,EAAQD,EAAI,iBAAiB,KAAK,EAClCE,EAAWD,EAAM,CAAC,EAClBE,EAAUF,EAAM,CAAC,EAEjBG,EAAOD,EAAQ,cAAc,GAAG,EAEtC,IAAIE,EAAS,GACTH,EAAS,cAAc,KAAK,EAC5BG,EAASH,EAAS,cAAc,KAAK,EAAE,IAEvCG,EAASH,EAAS,UAAU,KAAM,EAGtC,MAAMI,EAAMF,EAAOA,EAAK,KAAO,GACzBG,EAAQH,EAAOA,EAAK,UAAYD,EAAQ,UAAU,KAAM,EACxDK,EAAQ,MAAM,KAAKL,EAAQ,iBAAiB,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,IAAIM,GAAKA,EAAE,UAAU,MAAM,EAAE,KAAK,GAAG,EAEhGC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAU,IAAI,mBAAmB,EAC5CA,EAAW,UAAY;AAAA,uBACRJ,CAAG;AAAA,4CACkBD,CAAM,UAAUE,CAAK;AAAA;AAAA,iDAEhBD,CAAG;AAAA,8BACtBC,CAAK;AAAA;AAAA,UAG3BT,EAAY,YAAYY,CAAU,EAElC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAS,SAAS,cAAc,QAAQ,EAC9CD,EAAG,UAAU,IAAI,WAAW,EAC5BC,EAAO,UAAYL,EACnBK,EAAO,iBAAiB,QAAS,IAAM,CAEnCb,EAAK,iBAAiB,YAAY,EAAE,QAASc,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAC/Ef,EAAY,iBAAiB,oBAAoB,EAAE,QAASgB,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAG9FF,EAAO,QAAQ,IAAI,EAAE,UAAU,IAAI,QAAQ,EAC3CF,EAAW,UAAU,IAAI,QAAQ,CAC7C,CAAS,EACDC,EAAG,YAAYC,CAAM,EAErB,MAAMG,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,aAAa,EACjCA,EAAM,UAAY,YAAYT,CAAG;AAAA,8BACXC,CAAK;AAAA;AAAA,6BAENC,CAAK;AAAA;AAAA;AAAA,sBAM1BG,EAAG,YAAYI,CAAK,EAEpBhB,EAAK,YAAYY,CAAE,CAE3B,CAAK,EAKDd,EAAM,UAAY,GAClBA,EAAM,YAAYC,CAAW,EAC7BD,EAAM,YAAYE,CAAI,EAGlBA,EAAK,SAAS,OAAS,IACvBA,EAAK,SAAS,CAAC,EAAE,UAAU,IAAI,QAAQ,EACvCD,EAAY,SAAS,CAAC,EAAE,UAAU,IAAI,QAAQ,EAEtD"}