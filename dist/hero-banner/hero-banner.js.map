{"version":3,"file":"hero-banner.js","sources":["../../src/blocks/hero-banner/hero-banner.js"],"sourcesContent":["import { createOptimizedPicture } from '../../scripts/aem.js';\nimport './hero-banner.css';\n\nexport default function decorate(block) {\n\n\n    const tabContents = document.createElement('div');\n    tabContents.classList.add('hero__contents');\n\n    const tabs = document.createElement('ul');\n    tabs.classList.add('hero__tabs');\n\n    let index = 0;\n\n    [...block.children].forEach((row) => {\n        const items = row.querySelectorAll('div');\n        const imageCol = items[0];\n        const textCol = items[1];\n\n        const link = textCol.querySelector('a');\n\n        const mediaImage = imageCol.querySelector('picture');\n\n        const url = link ? link.href : '';\n        const title = link ? link.innerText : textCol.innerText.trim();\n        const texts = Array.from(textCol.querySelectorAll('p')).slice(1).map(p => p.innerText.trim()).join(' ');\n\n        const tabContent = document.createElement('div');\n        tabContent.classList.add('hero__tab-content');\n        tabContent.innerHTML = `\n            <a href=\"${url}\" class=\"hero__tab-link\">\n            ${mediaImage.outerHTML}\n            </a> \n            <a class=\"tab-content-blurb\" href=\"${url}\"> \n                        <h3>${title}</h3> \n                </a>\n        `;\n        tabContents.appendChild(tabContent);\n\n        const li = document.createElement('li');\n        const tabBtn = document.createElement('button');\n        li.classList.add('hero__tab');\n        tabBtn.innerText = title;\n        tabBtn.addEventListener('click', () => {\n            const activeTabContent = tabContents.querySelector('.hero__tab-content.active');\n            const height = activeTabContent.offsetHeight;\n            tabContents.style.height = `${height}px`;\n\n            // deactivate all tabs and contents\n            tabs.querySelectorAll('.hero__tab').forEach((t) => t.classList.remove('active'));\n            tabContents.querySelectorAll('.hero__tab-content').forEach((c) => c.classList.remove('active'));\n\n            // activate the clicked tab and its content\n            tabBtn.closest('li').classList.add('active');\n            tabContent.classList.add('active');\n\n            setTimeout(() => {\n                tabContents.style.height = 'auto';\n            }, 200);\n        });\n        li.appendChild(tabBtn);\n\n        const blurb = document.createElement('div');\n        blurb.classList.add('hero__blurb');\n        blurb.innerHTML = `<a href=\"${url}\"> \n                        <h3>${title}</h3> \n                    <div class=\"hero__blurb-content\">\n                        <p>${texts}</p>\n                        <p>Find out more...</p>\n                    </div>\n                </a>`;\n\n\n        li.appendChild(blurb);\n\n        tabs.appendChild(li);\n        index++;\n    });\n\n    tabContents.querySelectorAll('picture > img').forEach((img) => {\n        const picture = img.closest('picture');\n        if (picture) {\n            const optimizedPicture = createOptimizedPicture(img.src, img.alt, false, [{ width: '1200', height: '508' }]);\n            picture.replaceWith(optimizedPicture);\n        }\n    });\n\n    block.innerHTML = '';\n    block.appendChild(tabContents);\n    block.appendChild(tabs);\n\n    // activate the first tab\n    if (tabs.children.length > 0) {\n        tabs.children[0].classList.add('active');\n        tabContents.children[0].classList.add('active');\n    }\n}\n"],"names":["decorate","block","tabContents","tabs","row","items","imageCol","textCol","link","mediaImage","url","title","texts","p","tabContent","li","tabBtn","height","t","c","blurb","img","picture","optimizedPicture","createOptimizedPicture"],"mappings":"8CAGe,SAASA,EAASC,EAAO,CAGpC,MAAMC,EAAc,SAAS,cAAc,KAAK,EAChDA,EAAY,UAAU,IAAI,gBAAgB,EAE1C,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,YAAY,EAI/B,CAAC,GAAGF,EAAM,QAAQ,EAAE,QAASG,GAAQ,CACjC,MAAMC,EAAQD,EAAI,iBAAiB,KAAK,EAClCE,EAAWD,EAAM,CAAC,EAClBE,EAAUF,EAAM,CAAC,EAEjBG,EAAOD,EAAQ,cAAc,GAAG,EAEhCE,EAAaH,EAAS,cAAc,SAAS,EAE7CI,EAAMF,EAAOA,EAAK,KAAO,GACzBG,EAAQH,EAAOA,EAAK,UAAYD,EAAQ,UAAU,KAAM,EACxDK,EAAQ,MAAM,KAAKL,EAAQ,iBAAiB,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,IAAIM,GAAKA,EAAE,UAAU,MAAM,EAAE,KAAK,GAAG,EAEhGC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAU,IAAI,mBAAmB,EAC5CA,EAAW,UAAY;AAAA,uBACRJ,CAAG;AAAA,cACZD,EAAW,SAAS;AAAA;AAAA,iDAEeC,CAAG;AAAA,8BACtBC,CAAK;AAAA;AAAA,UAG3BT,EAAY,YAAYY,CAAU,EAElC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAChCC,EAAS,SAAS,cAAc,QAAQ,EAC9CD,EAAG,UAAU,IAAI,WAAW,EAC5BC,EAAO,UAAYL,EACnBK,EAAO,iBAAiB,QAAS,IAAM,CAEnC,MAAMC,EADmBf,EAAY,cAAc,2BAA2B,EAC9C,aAChCA,EAAY,MAAM,OAAS,GAAGe,CAAM,KAGpCd,EAAK,iBAAiB,YAAY,EAAE,QAASe,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAC/EhB,EAAY,iBAAiB,oBAAoB,EAAE,QAASiB,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAG9FH,EAAO,QAAQ,IAAI,EAAE,UAAU,IAAI,QAAQ,EAC3CF,EAAW,UAAU,IAAI,QAAQ,EAEjC,WAAW,IAAM,CACbZ,EAAY,MAAM,OAAS,MAC9B,EAAE,GAAG,CAClB,CAAS,EACDa,EAAG,YAAYC,CAAM,EAErB,MAAMI,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAU,IAAI,aAAa,EACjCA,EAAM,UAAY,YAAYV,CAAG;AAAA,8BACXC,CAAK;AAAA;AAAA,6BAENC,CAAK;AAAA;AAAA;AAAA,sBAM1BG,EAAG,YAAYK,CAAK,EAEpBjB,EAAK,YAAYY,CAAE,CAE3B,CAAK,EAEDb,EAAY,iBAAiB,eAAe,EAAE,QAASmB,GAAQ,CAC3D,MAAMC,EAAUD,EAAI,QAAQ,SAAS,EACrC,GAAIC,EAAS,CACT,MAAMC,EAAmBC,EAAuBH,EAAI,IAAKA,EAAI,IAAK,GAAO,CAAC,CAAE,MAAO,OAAQ,OAAQ,KAAO,CAAA,CAAC,EAC3GC,EAAQ,YAAYC,CAAgB,CAChD,CACA,CAAK,EAEDtB,EAAM,UAAY,GAClBA,EAAM,YAAYC,CAAW,EAC7BD,EAAM,YAAYE,CAAI,EAGlBA,EAAK,SAAS,OAAS,IACvBA,EAAK,SAAS,CAAC,EAAE,UAAU,IAAI,QAAQ,EACvCD,EAAY,SAAS,CAAC,EAAE,UAAU,IAAI,QAAQ,EAEtD"}